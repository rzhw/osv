{% extends 'base.html' %}
{% macro table_header_cell(column_id, column_name) %}
<th
class="mdc-data-table__header-cell mdc-data-table__header-cell--with-sort"
role="columnheader"
scope="col"
aria-sort="none"
data-column-id="{{ column_id }}"
>
<div class="mdc-data-table__header-cell-wrapper">
  <div class="mdc-data-table__header-cell-label">
    {{ column_name }}
  </div>
  <button class="mdc-icon-button material-icons mdc-data-table__sort-icon-button"
  aria-label="Sort by {{ column_name }}" aria-describedby="{{ column_id }}-status-label">arrow_upward</button>
  <div class="mdc-data-table__sort-status-label" aria-hidden="true" id="{{ column_id }}-status-label">
  </div>
</div>
</th>
{% endmacro %}

{% block content %}
<div class="mdc-layout-grid">
  <div class="mdc-layout-grid__inner">
    <div class="mdc-layout-grid__cell--span-8 search-container">
      <label class="mdc-text-field mdc-text-field--filled mdc-text-field--with-leading-icon">
        <span class="mdc-text-field__ripple"></span>
        <span class="mdc-floating-label" id="my-label-id">Package or ID search</span>
        <i class="material-icons mdc-text-field__icon mdc-text-field__icon--leading" tabindex="0" role="button">search</i>
        <input class="mdc-text-field__input" type="text" aria-labelledby="my-label-id">
        <span class="mdc-line-ripple"></span>
      </label>
    </div>
    <div class="mdc-layout-grid__cell--span-12">
      <div class="vuln-table mdc-data-table">
        <table class="mdc-data-table__table" aria-label="Dessert calories">
          <thead>
            <tr class="mdc-data-table__header-row">
              {{ table_header_cell('id', 'ID') }}
              {{ table_header_cell('package', 'Packages') }}
              {{ table_header_cell('summary', 'Summary') }}
              {{ table_header_cell('affected-versions', 'Affected versions') }}
              {{ table_header_cell('ecosystem', 'Ecosystem') }}
              {{ table_header_cell('last-modified', 'Last modified') }}
            </tr>
          </thead>
          <tbody class="mdc-data-table__content">
            {% for vulnerability in vulnerabilities %}
            <tr class="mdc-data-table__row">
              <td class="mdc-data-table__cell">
                {{ vulnerability.id }}
              </td>
              <td class="mdc-data-table__cell">
                {% for package in vulnerability.packages %}
                  {{ package }}
                {% endfor %}
              </td>
              <td class="mdc-data-table__cell">
                {{ vulnerability.summary }}
              </td>
              <td class="mdc-data-table__cell">
                {% for version in vulnerability.versions %}
                  {{ version }}
                {% endfor %}
              </td>
              <td class="mdc-data-table__cell"></td>
              <td class="mdc-data-table__cell"></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      Pages
      <a href="{{ url_for(request.endpoint) }}?page=1" data-turbo-frame="vulnerability-tbody">1</a>
      <a href="{{ url_for(request.endpoint) }}?page=2" data-turbo-frame="vulnerability-tbody">2</a>
      <a href="{{ url_for(request.endpoint) }}?page=3" data-turbo-frame="vulnerability-tbody">3</a>
    </div>
  </div>
</div>
{% endblock %}